        -:    0:Source:unittest2.c
        -:    0:Graph:unittest2.gcno
        -:    0:Data:unittest2.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "dominion.h"
        -:    2:#include "dominion_helpers.h"
        -:    3:#include "rngs.h"
        -:    4:#include <assert.h>
        -:    5:#include <stdio.h>
        -:    6:#include <math.h>
        -:    7:#include <stdlib.h>
        -:    8:#include <string.h>
        -:    9:
        -:   10:// verify the test
        -:   11:int counterVariable = 0 ; 
        -:   12:
        -:   13:
        -:   14:// assertTrue function to collect coverage
function assertTrueFunction called 0 returned 0% blocks executed 0%
        -:   15:void assertTrueFunction(int x, int y){
        -:   16:
    #####:   17:    if (x == y){
branch  0 never executed
branch  1 never executed
    #####:   18:        printf("Test: PASSED\n" );
    #####:   19:    }
        -:   20:
        -:   21:
        -:   22:    else {
    #####:   23:        printf("Test: FAILED" );
        -:   24:  
    #####:   25:    counterVariable++; 
        -:   26:}
        -:   27:
    #####:   28:}
        -:   29:
        -:   30:
        -:   31:
        -:   32:#define NOISY_TEST 1
        -:   33:
function main called 1 returned 100% blocks executed 80%
        -:   34:int main() {
        -:   35:    int i;
        1:   36:    int seed = 1000;
        1:   37:    int numPlayer = 2;
        1:   38:    int maxBonus = 10;
        -:   39:    int p, r, handCount;
        -:   40:    int bonus;
        1:   41:    int k[10] = {adventurer, council_room, feast, gardens, mine
        -:   42:               , remodel, smithy, village, baron, great_hall};
        -:   43:    struct gameState G;
        1:   44:    int maxHandCount = 5;
        -:   45:    // arrays of all coppers, silvers, and golds
        -:   46:    int coppers[MAX_HAND];
        -:   47:    int silvers[MAX_HAND];
        -:   48:    int golds[MAX_HAND];
     1002:   49:    for (i = 0; i < MAX_HAND; i++)
branch  0 taken 99%
branch  1 taken 1%
        -:   50:    {
      500:   51:        coppers[i] = copper;
      500:   52:        silvers[i] = silver;
      500:   53:        golds[i] = gold;
      500:   54:    }
        -:   55:
        1:   56:    printf ("TESTING updateCoins():\n");
        6:   57:    for (p = 0; p < numPlayer; p++)
branch  0 taken 67%
branch  1 taken 33%
        -:   58:    {
       24:   59:        for (handCount = 1; handCount <= maxHandCount; handCount++)
branch  0 taken 83%
branch  1 taken 17%
        -:   60:        {
      240:   61:            for (bonus = 0; bonus <= maxBonus; bonus++)
branch  0 taken 92%
branch  1 taken 8%
        -:   62:            {
        -:   63:#if (NOISY_TEST == 1)
      110:   64:                printf("Test player %d with %d treasure card(s) and %d bonus.\n", p, handCount, bonus);
        -:   65:#endif
      110:   66:                memset(&G, 23, sizeof(struct gameState));   // clear the game state
      110:   67:                r = initializeGame(numPlayer, k, seed, &G); // initialize a new game
      110:   68:                G.handCount[p] = handCount;                 // set the number of cards on hand
      110:   69:                memcpy(G.hand[p], coppers, sizeof(int) * handCount); // set all the cards to copper
      110:   70:                updateCoins(p, &G, bonus);
        -:   71:#if (NOISY_TEST == 1)
        -:   72:                
      110:   73:                printf("G.coins = %d, expected = %d\n", G.coins, handCount * 1 + bonus);
        -:   74:#endif
      220:   75:                assert(G.coins == handCount * 1 + bonus); // check if the number of coins is correct
branch  0 taken 0%
branch  1 taken 100%
        -:   76:
      110:   77:                memcpy(G.hand[p], silvers, sizeof(int) * handCount); // set all the cards to silver
      110:   78:                updateCoins(p, &G, bonus);
        -:   79:#if (NOISY_TEST == 1)
      110:   80:                printf("G.coins = %d, expected = %d\n", G.coins, handCount * 2 + bonus);
        -:   81:#endif
      220:   82:                assert(G.coins == handCount * 2 + bonus); // check if the number of coins is correct
branch  0 taken 0%
branch  1 taken 100%
        -:   83:
      110:   84:                memcpy(G.hand[p], golds, sizeof(int) * handCount); // set all the cards to gold
        -:   85:   
      110:   86:                updateCoins(p, &G, bonus);
        -:   87:
        -:   88:
        -:   89:#if (NOISY_TEST == 1)
      110:   90:                printf("G.coins = %d, expected = %d\n", G.coins, handCount * 3 + bonus);
        -:   91:
        -:   92:
        -:   93:#endif
      220:   94:                assert(G.coins == handCount * 3 + bonus); // check if the number of coins is correct
branch  0 taken 0%
branch  1 taken 100%
      110:   95:            }
       10:   96:        }
        2:   97:    }
        -:   98:
        1:   99:    printf("All tests passed!\n");
        -:  100:
        1:  101:    return 0;
        -:  102:}
        -:  103:
